const form=document.getElementById("preRegForm"),errorMsg=document.getElementById("errorMessage"),success=document.getElementById("success");if(form){form.addEventListener("submit",e=>{e.preventDefault();const t=form.nickname.value.trim(),n=form.email.value.trim(),a=form.password.value.trim();if(!t||!n||!a){errorMsg.textContent="All fields required";errorMsg.classList.add("show");return}errorMsg.classList.remove("show");fetch(form.action,{method:"POST",body:new FormData(form)}).then(r=>{if(r.ok){form.style.display="none";success.style.display="flex"}else r.json().then(d=>{errorMsg.textContent=d.error||"Error occurred";errorMsg.classList.add("show")})}).catch(()=>{errorMsg.textContent="Network error";errorMsg.classList.add("show")})})}